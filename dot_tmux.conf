# =============================================================================
# TMUX CONFIGURATION FILE
# =============================================================================
# Author: Tony Mattke
# Description: vim-style navigation, solarized dark theme
#
# Quick Reference:
#   Prefix key: Ctrl+Space (instead of default Ctrl+b)
#   Reload config: prefix + r
#   New window: prefix + c (opens in current directory)
#   Split vertical: prefix + | (opens in current directory)
#   Split horizontal: prefix + - (opens in current directory)
#   Navigate panes: Ctrl+h/j/k/l (no prefix needed, works with vim!)
#   Switch windows: Shift+Left/Right (no prefix needed)
# =============================================================================


# =============================================================================
# TERMINAL & COLOR SETTINGS
# =============================================================================

# Tell programs running inside tmux what type of terminal they're in
# "tmux-256color" enables 256 color support and tmux-specific features
set -g default-terminal "tmux-256color"

# Enable true color (24-bit RGB) support for all xterm-compatible terminals
# This makes colors look correct in vim, less, and other terminal programs
# The wildcard "xterm*" matches: xterm, xterm-256color, xterm-kitty, etc.
# "Tc" stands for "true color" capability
set -ag terminal-overrides ",xterm*:Tc"


# =============================================================================
# GENERAL SETTINGS
# =============================================================================

# Scrollback buffer - how many lines of history to keep
# Default is 2000, we increase to 50000 for longer command output history
# Usage: Scroll up in a pane to see old output (prefix + [ or mouse scroll)
set -g history-limit 50000

# Number of paste buffers tmux remembers when you copy text
# Default is 50, we reduce to 20 (most people only use the most recent copy)
# View buffers: prefix + = (shows all saved copies)
set -g buffer-limit 20

# Remove delay after pressing Escape key
# Default is 500ms, which causes annoying delays in vim/neovim
# Setting to 0 makes vim/neovim feel responsive when pressing Escape
set -sg escape-time 0

# How long (in milliseconds) status messages are displayed
# Example: When you reload config, "Config reloaded!" shows for 1500ms (1.5 sec)
# Default is 750ms, we increase for easier reading
set -g display-time 1500

# Whether panes remain visible after the program inside exits
# "off" means panes close automatically when program finishes (keeps workspace clean)
# "on" would keep the pane open showing "[exited]"
set -g remain-on-exit off

# How long (in milliseconds) you can repeat a command without pressing prefix again
# Example: After prefix+H to resize pane, you can keep pressing H for 300ms
# Useful for resize operations (H/J/K/L) where you want multiple adjustments
set -g repeat-time 300

# Enable mouse support - allows clicking panes, resizing with mouse, scrolling, etc.
# Very convenient for beginners and occasional use
# Can still use keyboard for everything (keyboard is usually faster)
set -g mouse on

# Send focus events to applications running inside tmux
# Allows vim/neovim to detect when you switch to/from a tmux pane
# Enables vim to auto-reload files when you switch back to that pane
# Essential for modern vim/neovim workflows
set -g focus-events on

# Set the terminal emulator's window title to show current tmux window info
# Makes it easier to identify tmux windows in your terminal emulator's tabs/windows
set -g set-titles on

# Format for terminal title: "window_number:window_name"
# Example: "1:zsh" or "2:vim" or "3:server"
# #I = window index/number, #W = window name
set -g set-titles-string "#I:#W"


# =============================================================================
# WINDOW & PANE INDEXING
# =============================================================================

# Start numbering windows at 1 instead of 0
# Reason: 1 key is closer to fingers than 0 key on keyboard
# Makes switching windows (prefix + number) more ergonomic
set -g base-index 1

# Start numbering panes at 1 instead of 0 (matches window numbering)
# Consistency makes it easier to remember
setw -g pane-base-index 1

# Automatically renumber windows when one is closed
# Example: If you have windows 1,2,3,4 and close window 2, windows renumber to 1,2,3
# Prevents gaps in window numbers, keeps them sequential
set -g renumber-windows on


# =============================================================================
# KEY BINDINGS - PREFIX KEY
# =============================================================================

# Change prefix from default Ctrl+b to Ctrl+Space
# Reasons:
#   - Easier to reach (thumb on Ctrl, thumb/space for Space)
#   - Doesn't conflict with common shortcuts (Ctrl+b is "back" in many apps)
#   - Modern choice, gaining popularity in tmux community
unbind C-b                    # Remove default Ctrl+b binding
set -g prefix C-Space         # Set new prefix to Ctrl+Space
bind C-Space send-prefix      # Allow sending Ctrl+Space to programs (press prefix twice)


# =============================================================================
# KEY BINDINGS - CONFIGURATION
# =============================================================================

# Reload tmux configuration file without restarting tmux
# Usage: prefix + r
# Displays "Config reloaded!" message for 1.5 seconds
# Essential for testing configuration changes
bind r source-file ~/.tmux.conf \; display "Config reloaded!"


# =============================================================================
# KEY BINDINGS - WINDOWS
# =============================================================================

# Create new window in current pane's directory (instead of home directory)
# Usage: prefix + c
# Default behavior: new windows open in ~
# Our behavior: new windows open in same directory as current pane
# Example: If you're in ~/projects/myapp, new window starts there too
bind c new-window -c "#{pane_current_path}"

# Switch to previous/next window WITHOUT needing prefix key
# Usage: Just press Shift+Left or Shift+Right arrow
# Much faster than default (prefix + p/n)
# Great for quickly moving between windows
bind -n S-Left previous-window      # Shift+Left arrow = previous window
bind -n S-Right next-window         # Shift+Right arrow = next window

# Alternative window switching using Shift+Alt+vim keys (also without prefix)
# For vim users who prefer hjkl navigation over arrow keys
bind -n M-H previous-window         # Shift+Alt+H = previous window
bind -n M-L next-window             # Shift+Alt+L = next window

# Kill current window without confirmation
# Usage: prefix + Shift+X
# Default asks "kill window? (y/n)", this kills immediately
# Can restore with tmux-resurrect plugin if needed
bind X kill-window


# =============================================================================
# KEY BINDINGS - PANES (SPLITS)
# =============================================================================

# Split window vertically (left/right) using | character
# Visual mnemonic: | looks like a vertical line dividing the screen
# Opens new pane in same directory as current pane
# Usage: prefix + Shift+\ (the | character)
unbind '"'                                          # Remove default binding
bind | split-window -h -c "#{pane_current_path}"   # | = vertical split

# Split window horizontally (top/bottom) using - character
# Visual mnemonic: - looks like a horizontal line dividing the screen
# Opens new pane in same directory as current pane
# Usage: prefix + - (minus/dash)
unbind %                                           # Remove default binding
bind - split-window -v -c "#{pane_current_path}"   # - = horizontal split

# Kill current pane without confirmation
# Usage: prefix + x
# Default asks "kill pane? (y/n)", this kills immediately
# Keeps workflow fast - can restore with tmux-resurrect if needed
bind x kill-pane


# =============================================================================
# KEY BINDINGS - PANE NAVIGATION
# =============================================================================
# NOTE: These vim-style bindings (h/j/k/l) work seamlessly with vim/neovim
# thanks to the vim-tmux-navigator plugin below. You can navigate between
# vim splits and tmux panes using the same Ctrl+h/j/k/l keys!
# =============================================================================

# Navigate between panes using vim-style keys (h/j/k/l) with prefix
# Usage: prefix + h/j/k/l
# h = left, j = down, k = up, l = right
# Familiar to vim users
bind h select-pane -L         # prefix + h = select pane to the left
bind j select-pane -D         # prefix + j = select pane below
bind k select-pane -U         # prefix + k = select pane above
bind l select-pane -R         # prefix + l = select pane to the right

# Navigate between panes using Alt+arrow keys WITHOUT prefix
# Usage: Just press Alt+arrow (no prefix needed)
# Faster than prefix+h/j/k/l for quick navigation
# Good for users who prefer arrow keys over vim keys
# "-n" flag means "no prefix required"
bind -n M-Left select-pane -L     # Alt+Left = select pane to the left
bind -n M-Right select-pane -R    # Alt+Right = select pane to the right
bind -n M-Up select-pane -U       # Alt+Up = select pane above
bind -n M-Down select-pane -D     # Alt+Down = select pane below


# =============================================================================
# KEY BINDINGS - PANE RESIZING
# =============================================================================

# Resize panes using Shift+vim keys (capital H/J/K/L)
# Usage: prefix + Shift+H/J/K/L
# The "-r" flag means "repeatable" - after pressing prefix once, you can
# keep pressing H/J/K/L for 300ms (repeat-time setting) without prefix
# Each press resizes by 5 cells (characters)
# Example: prefix + Shift+H, H, H, H (makes pane 20 cells narrower)
bind -r H resize-pane -L 5    # Shift+H = make pane narrower (move left border left)
bind -r J resize-pane -D 5    # Shift+J = make pane taller (move bottom border down)
bind -r K resize-pane -U 5    # Shift+K = make pane shorter (move bottom border up)
bind -r L resize-pane -R 5    # Shift+L = make pane wider (move right border right)


# =============================================================================
# COPY MODE (VIM-STYLE)
# =============================================================================

# Use vim-style key bindings in copy mode (when scrolling/selecting text)
# Makes tmux feel like vim when navigating history
setw -g mode-keys vi

# Enter copy mode (scroll mode) using prefix + Enter
# Default is prefix + [ which is harder to reach
# In copy mode: use vim keys to navigate (h/j/k/l, Ctrl+u/d, /, ?, etc.)
bind Enter copy-mode

# Copy mode key bindings (only active when in copy mode):

# Start text selection with 'v' (like vim's visual mode)
# Usage: In copy mode, press 'v' then move cursor to select text
bind -T copy-mode-vi v send -X begin-selection

# Toggle rectangle selection with Ctrl+v (like vim's visual block mode)
# Usage: In copy mode, press Ctrl+v to select rectangular blocks of text
# Useful for selecting columns of text
# Example: Selecting just the "value" column from "key: value" lines
bind -T copy-mode-vi C-v send -X rectangle-toggle

# Copy selection to system clipboard with 'y' (like vim's yank)
# Uses macOS "pbcopy" command to copy to system clipboard
# After copying, exits copy mode automatically
# Note: For Linux, change "pbcopy" to "xclip -selection clipboard"
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"

# Exit copy mode with Escape key (like vim)
# Default is 'q', but Escape is more familiar to vim users
bind -T copy-mode-vi Escape send -X cancel


# =============================================================================
# THEME - SOLARIZED DARK
# =============================================================================
# Using manual configuration instead of plugin for fine-grained control
# Solarized Dark color palette:
#   base03:  #002b36 (background)
#   base02:  #073642 (background highlights)
#   base01:  #586e75 (comments)
#   base00:  #657b83 (body text)
#   base0:   #839496 (body text)
#   base1:   #93a1a1 (optional emphasized content)
#   base2:   #eee8d5 (background highlights)
#   base3:   #fdf6e3 (background)
#   yellow:  #b58900
#   orange:  #cb4b16
#   red:     #dc322f
#   magenta: #d33682
#   violet:  #6c71c4
#   blue:    #268bd2
#   cyan:    #2aa198
#   green:   #859900
# =============================================================================

# Enable status bar and refresh it every 5 seconds
set -g status on
set -g status-interval 5

# Position status bar at bottom of screen
# Options: top, bottom
set -g status-position bottom

# Align window list to left side of status bar
# Options: left, centre, right
set -g status-justify left

# Status bar colors (Solarized Dark)
# Background: base02 (#073642), Foreground: base0 (#839496)
set -g status-style "bg=#073642,fg=#839496"

# LEFT SIDE OF STATUS BAR
# Shows session name with blue background
set -g status-left-length 40
set -g status-left "#[fg=#002b36,bg=#268bd2,bold] #S #[fg=#268bd2,bg=#073642]"
# #S = session name
# Color scheme: base03 text on blue background, with powerline separator

# RIGHT SIDE OF STATUS BAR
# Shows date and time
set -g status-right-length 100
set -g status-right "#[fg=#586e75]#[fg=#839496,bg=#586e75] %Y-%m-%d #[fg=#268bd2]#[fg=#002b36,bg=#268bd2,bold] %H:%M "
# Format: YYYY-MM-DD HH:MM
# Color scheme: Gradient from base01 -> base0 -> blue

# WINDOW STATUS (in status bar)
# Inactive windows: dimmed appearance
setw -g window-status-format "#[fg=#586e75] #I:#W "
# Active window: bright blue, bold
setw -g window-status-current-format "#[fg=#268bd2,bold] #I:#W "
# #I = window index, #W = window name

# PANE BORDERS
# Inactive pane borders: dim (base01)
set -g pane-border-style "fg=#586e75"
# Active pane border: bright blue to show focus
set -g pane-active-border-style "fg=#268bd2"

# MESSAGE STYLE (when tmux displays messages)
# Example: "Config reloaded!" message
# Blue background with dark text for visibility
set -g message-style "bg=#268bd2,fg=#002b36"


# =============================================================================
# PLUGINS (TPM - TMUX PLUGIN MANAGER)
# =============================================================================
# Installation:
#   1. Install TPM: 
#      brew install tpm.
     -- OR -- 
#      git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
#   2. Reload tmux config: prefix + r
#   3. Install plugins: prefix + I (capital i)
#
# Plugin Management:
#   prefix + I          Install new plugins (after adding to this file)
#   prefix + U          Update all plugins
#   prefix + alt + u    Uninstall removed plugins
# =============================================================================

# TPM - Tmux Plugin Manager (required for all other plugins)
# This must be loaded first
set -g @plugin 'tmux-plugins/tpm'

# Tmux Sensible - A set of tmux options that should be acceptable to everyone
# Includes: better default bindings, UTF-8 support, larger history, etc.
# Note: Our custom settings above will override these defaults
# GitHub: https://github.com/tmux-plugins/tmux-sensible
set -g @plugin 'tmux-plugins/tmux-sensible'

# Tmux Resurrect - Save and restore tmux sessions
# Usage:
#   prefix + Ctrl+s = Save current session (all windows, panes, programs)
#   prefix + Ctrl+r = Restore saved session (even after computer restart)
# What it saves: window/pane layout, current directory, running programs
# GitHub: https://github.com/tmux-plugins/tmux-resurrect
set -g @plugin 'tmux-plugins/tmux-resurrect'

# Tmux Continuum - Automatic session saving and restoration
# Automatically saves session every 15 minutes (no manual save needed)
# Automatically restores session when tmux starts
# Requires: tmux-resurrect (listed above)
# GitHub: https://github.com/tmux-plugins/tmux-continuum
set -g @plugin 'tmux-plugins/tmux-continuum'

# Tmux Yank - Better copy/paste with system clipboard
# Automatically detects your OS and uses correct clipboard tool:
#   - macOS: pbcopy/pbpaste
#   - Linux: xclip or xsel
#   - Windows (WSL): clip.exe
# Also adds useful copy mode bindings (y, Y, etc.)
# GitHub: https://github.com/tmux-plugins/tmux-yank
set -g @plugin 'tmux-plugins/tmux-yank'

# Vim Tmux Navigator - Seamless navigation between vim and tmux panes
# Allows using Ctrl+h/j/k/l to navigate between vim splits AND tmux panes
# No need to remember different keys for vim vs tmux
# Requires matching vim plugin: https://github.com/christoomey/vim-tmux-navigator
# Install in vim: Add "christoomey/vim-tmux-navigator" to your vim plugin manager
# GitHub: https://github.com/christoomey/vim-tmux-navigator
set -g @plugin 'christoomey/vim-tmux-navigator'


# =============================================================================
# PLUGIN SETTINGS
# =============================================================================

# Tmux Resurrect: Capture pane contents when saving sessions
# This saves the actual text/output in your panes (not just the program)
# Useful for restoring terminal output after restart
# Warning: Can make save files larger, but worth it for full restoration
set -g @resurrect-capture-pane-contents 'on'

# Tmux Continuum: Automatically restore session when tmux starts
# When you open tmux, it automatically restores your last saved session
# No need to manually restore with prefix + Ctrl+r
set -g @continuum-restore 'on'


# =============================================================================
# INITIALIZE TPM
# =============================================================================
# This line MUST be at the very bottom of the file
# It loads TPM and all the plugins listed above
# If this is your first time, run: prefix + I to install plugins
run '~/.tmux/plugins/tpm/tpm'
